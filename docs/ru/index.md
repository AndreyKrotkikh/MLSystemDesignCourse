---
layout: plain
title: Курс по ML System Design
lang: ru
---

{% include lang_switcher.html %}

# Курс по ML System Design

## Авторы

{% assign authors = site.data.authors %}
{% if authors and authors.size > 0 %}
<ul>
  {% for person in authors %}
  <li>
    <strong>{{ person.name }}</strong>
    {% if person.role %} — {{ person.role }}{% endif %}
    {% if person.links and person.links.github %}
      · <a href="{{ person.links.github }}">GitHub</a>
    {% endif %}
  </li>
  {% endfor %}
  </ul>
{% else %}
<p>Список авторов пока пуст.</p>
{% endif %}

## Документы

- [Шаблон дизайн-документа]({{ '/ru/template' | relative_url }})
- [Чеклист дизайн-документа]({{ '/ru/checklist' | relative_url }})

## Дизайн‑документ проекта

### Резюме
- **Название проекта**: Динамическое ценообразование в Телекоме
- **Постановка задачи**: Построить user‑tariff based систему динамического ценообразования и персональных офферов для тарифов/опций на основе признаков пользователя, региона и конкурентов (временные ряды), с доставкой через App/Push/SMS/оффлайн/Voice (звонок по телефону) и триггерную платформу; динамика на опциях, репрайс/миграции для архивных тарифов с целью поддержания долгосрочных планов по доходам, доле рынка, KPI и удержания пользователей. Текущее решение не обладает должной степенью автоматизации, что приводит к необходимости ручной обработке данных и ручному ценообразованию, что приводит к ежедневной просадке прибыли компании и высокому риску человеческого фактора в виде потенциально необоснованных и неправильных решений и неверной трактовке обратной связи от пользователей.
- **Бизнес‑эффект**: Рост ARPU/LTV, снижение оттока, контроль GMV при фиксированной марже, удержание доли рынка; KPI: ARPU, churn, конверсия офферов, маржа, доля рынка, QoS/нагрузка сети.
- **Таймлайн**: ???

### I. Определение проблемы
- Истоки:
  - Суть: линейка базовых тарифов и множество архивных (≈5–10k); частые изменения абонплаты недопустимы; тренд к персонализации; различия по регионам и каналам.
  - Модель: user‑tariff based; признаки: пользовательские, региональные, конкурентные (временные ряды); каналы доставки цены: приложение/push, SMS, оффлайн.
  - Стейкхолдеры: коммерция/pricing, маркетинг, продукт‑менеджеры тарифов/опций, региональные продажи, финансы, юристы/регуляторика, CRM/BI/DS, поддержка, абоненты.
  - Ограничения: лимит повышения для архивных (регулятор ≤10%), цены/ассортимент зависят от региона и канала, определение реального пользователя SIM, нагрузка сети.
  - Происхождение тарифов: базовые тарифы создаёт маркетинг; под задачи ЦО согласуются персональные/сегментные тарифы; для миграций с архивных тарифов также запускаются новые планы. Персональные и персонализированные тарифы - разное, персональные/ползунковые (далее везде будет ползунковые) тарифы, пользователь самостоятельно определяет нужные ему параметры и цена автоматически пересчитывается, персонализированный - это компания самостоятельно предлагает тариф, либо выбор из базовых тарифо, в них допустима динамика.
  - Целеполагание: долгосрочный план доходов до 2028 года; квартальное планирование с заказчиками; между циклами поддерживаем текущие KPI.
  - Текущий процесс: 1–2 раза в год репрайс архивов или миграции; динамика разрешена на опциях; для разовых интернет‑пакетов используется uplift‑моделирование + бандиты; промо часто по правилам (триггерная платформа).
  - Триггеры: существует триггерная платформа (event → offer); напр., при 90% исчерпании пакета сразу отправляется SMS с опцией со скидкой.
- Важность и причины:
  - Цели: рост ARPU/LTV, снижение оттока, удержание доли рынка, улучшение юнит‑экономики, балансировка нагрузки сети.
  - Таргеты: max ARPU, churn prevention, контроль GMV при фиксированной марже.
  - Польза: выше конверсия персональных предложений, меньше массовых скидок, таргетированные региональные акции, лучшее покрытие сегментов пользователей.
  - Стоимость текущей проблемы: потеря маржи от массовых скидок, недоизвлечение willingness‑to‑pay, churn к конкурентам, неэффективные промо.
- Предыдущие попытки:
  - Базовая тарифная система с большим архивом; периодический репрайс; миграции на новые тарифы; частичная персонализация (>10% базы).
  - На опциях: динамическое ценообразование для разовых интернет‑пакетов через uplift‑моделирование и бандитов.
  - Что сработало: персонализация тарифа в приложении > массовые SMS; миграции увеличивают ARPU; бандиты дают uplift.
  - Что не сработало: частые изменения абонплаты вызывают негатив; массовые промо бьют по марже.
  - Улучшения: расширить динамику на больше опций, автоматизировать региональные кампании, увязать решения с нагрузкой сети и активностью конкурентов end‑to‑end.
- Прочие вопросы и риски:
  - Инфраструктура: витрины использования/баланса/каналов/регионов, каталог тарифов/опций/ограничений, фичестор, near‑real‑time decisioning, интеграции с CRM/приложением/SMS/IVR, A/B‑платформа, триггерная платформа событий, мониторинг.
  - Режимы отказа: неверные цены/правила → санкции/PR‑риски; перегруз сети; коллизии каналов; дрейф моделей; ошибки в идентификации владельца SIM; утечки данных.
  - Стоимость ошибок: штрафы и регуляторные риски, рост оттока, потеря маржи, рост нагрузки на поддержку.
  - Контроли: guardrails по ценам (для архивных ≤10%), eligibility/правила справедливости, регион/канал‑скоупинг, rate‑limits, канареечные релизы, офлайн/онлайн‑валидация, алерты по KPI, ручной override, объяснимость решений.

## II. Метрики и функции потерь

### i. Метрики
- Какие ключевые бизнес-метрики?
- Какие метрики качества модели?
- Как они связаны с целями бизнеса?
- Какие компромиссы между метриками?

### ii. Функции потерь
- Какие функции потерь будут использованы?
- Как они связаны с бизнес-метриками?
- Какие компромиссы?
- Как будем обрабатывать крайние случаи?

## III. Датасет

### i. Источники данных
- Какие внутренние источники доступны?
- Какие внешние данные можно использовать?
- Какие проблемы с качеством данных?
- Насколько свежие данные?

### ii. Разметка данных
- Как будет выполняться разметка?
- Каков процесс разметки?
- Как обеспечим качество?
- Каковы затраты?

### iii. Доступные метаданные
- Какие метаданные доступны?
- Как они будут использоваться?
- Какой дополнительный контекст они дают?

### iv. Проблемы качества
- Какие проблемы качества существуют?
- Как будем их решать?
- Каков процесс очистки данных?
- Как будем обрабатывать пропуски?

### v. ETL‑конвейер
- Как будем собирать данные?
- Какие преобразования нужны?
- Как будем обновлять данные?
- Какова частота обновления?

## IV. Схема валидации

### i. Требования
- Каковы требования к валидации?
- Как предотвратим утечки данных?
- Какие временные ограничения существуют?

### ii. Инференс
- Как модель делает предсказания?
- Каков горизонт предсказания?
- Какие ограничения учитывать?

### iii. Внутренние и внешние циклы
- Как будем валидировать модель?
- Какую стратегию кросс‑валидации используем?
- Как обрабатываем временные ряды?

### iv. Частота обновления
- Как часто обновляем модель?
- Что является триггером обновления?
- Как обрабатываем дрейф данных?

## V. Baseline

### i. Константный baseline
- Какие простые бейзлайны используем?
- Как будем с ними сравниваться?
- Каков минимально приемлемый результат?

### ii. Базовые модели
- Какие архитектуры попробуем?
- Каковы компромиссы?
- Как будем сравнивать?

### iii. Базовые признаки
- С какими признаками начнём?
- Как измерим важность признаков?
- Какой feature‑инжиниринг нужен?
